package com.example.studentCourses.Entity;

import java.time.LocalDateTime;
import java.util.List;

import com.fasterxml.jackson.annotation.JsonIgnore;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import jakarta.persistence.Id;
import jakarta.persistence.OneToMany;
import jakarta.persistence.Table;
import jakarta.validation.constraints.Email;
import jakarta.validation.constraints.NotBlank;
import jakarta.validation.constraints.Pattern;
import jakarta.validation.constraints.Size;

@Entity
@Table(name = "RegisteredStudents")
public class RegisteredStudentsEntity {
    
    @Id
    @Column(name = "StuId")
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long sId;
    
    @NotBlank(message = "Students first name cannot be empty")
    @Size(min = 3, max = 50, message = "Name must be between 2-50 characters")
    @Column(name = "FirstName")
    private String sFirstName;

    @NotBlank(message = "Students last name cannot be empty")
    @Size(min = 3, max = 50, message = "Name must be between 2-50 characters")
    @Column(name = "LastName")
    private String sLastName;
    
    @NotBlank(message = "Email is required")
    @Email(message = "Invalid Email Format")
    @Column(name = "Email")
    private String sEmail;
    
    @NotBlank(message = "Password is required")
    @Pattern(
        regexp = "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*#?&]).{8,}$",
        message = "Password must contain 8+ characters, 1 uppercase, 1 lowercase, 1 number, 1 special character"
    )
    @Column(name = "Password")
    private String sPassword;
    
    @Column(name = "CreatedAt")
    private LocalDateTime createdAt;
    
    @Column(name = "UpdatedAt")
    private LocalDateTime updatedAt;
    
    @OneToMany(mappedBy = "student")
    @JsonIgnore
    private List<StudentRegisteredCoursesEntity> registeredCourses;
    
    @OneToMany(mappedBy = "student")
    @JsonIgnore
    private List<StudentCompletedCoursesEntity> completedCourses;

    
    // -------- Correct Getters and Setters -------- //

    public Long getSId() {
        return sId;
    }

    public void setSId(Long sId) {
        this.sId = sId;
    }

    public String getSFirstName() {
        return sFirstName;
    }

    public void setSFirstName(String sFirstName) {
        this.sFirstName = sFirstName;
    }

    public String getSLastName() {
        return sLastName;
    }

    public void setSLastName(String sLastName) {
        this.sLastName = sLastName;
    }

    public String getSEmail() {
        return sEmail;
    }

    public void setSEmail(String sEmail) {
        this.sEmail = sEmail;
    }

    public String getSPassword() {
        return sPassword;
    }

    public void setSPassword(String sPassword) {
        this.sPassword = sPassword;
    }

    public LocalDateTime getCreatedAt() {
        return createdAt;
    }

    public void setCreatedAt(LocalDateTime createdAt) {
        this.createdAt = createdAt;
    }

    public LocalDateTime getUpdatedAt() {
        return updatedAt;
    }

    public void setUpdatedAt(LocalDateTime updatedAt) {
        this.updatedAt = updatedAt;
    }

    public List<StudentRegisteredCoursesEntity> getRegisteredCourses() {
        return registeredCourses;
    }

    public void setRegisteredCourses(List<StudentRegisteredCoursesEntity> registeredCourses) {
        this.registeredCourses = registeredCourses;
    }

    public List<StudentCompletedCoursesEntity> getCompletedCourses() {
        return completedCourses;
    }

    public void setCompletedCourses(List<StudentCompletedCoursesEntity> completedCourses) {
        this.completedCourses = completedCourses;
    }
}
